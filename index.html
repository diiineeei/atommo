<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atommo Desktop Health</title>
  <script>
    // Configuração de ambiente do app
    // Em desenvolvimento, use '/glances' para passar pelo proxy do Vite.
    // Em produção (site hospedado), tente falar direto com o agente local do usuário
    // (ex.: Glances em http://localhost:61208 ou agente custom em http://localhost:11420).
    (function(){
      var isLocalHost = ['localhost','127.0.0.1'].includes(location.hostname)
      var config = {
        apiBaseUrl: 'https://app-atommo-990926851328.us-central1.run.app'
      }
      // Permite override prévio (caso APP_CONFIG já exista via outro script)
      if (window.APP_CONFIG && typeof window.APP_CONFIG === 'object') {
        for (var k in window.APP_CONFIG) { try { config[k] = window.APP_CONFIG[k] } catch(_){} }
      }
      // Define/ajusta agentBaseUrl conforme ambiente
      // - Em localhost: usar '/glances' para passar pelo proxy do Vite
      // - Em produção: sempre preferir localhost real (Glances) e evitar caminhos relativos
      if (isLocalHost) {
        if (typeof config.agentBaseUrl !== 'string' || !config.agentBaseUrl) {
          config.agentBaseUrl = '/glances'
        }
      } else {
        // Se vier vazio ou relativo (ex.: '/glances'), forçamos localhost:61208
        if (typeof config.agentBaseUrl !== 'string' || !config.agentBaseUrl || config.agentBaseUrl.startsWith('/')) {
          config.agentBaseUrl = 'http://localhost:61208'
        }
      }
      window.APP_CONFIG = config
    })();
  </script>
  
</head>

<body>
  <div id="app"></div>
  <script type="module" src="/src/main.js"></script>
</body>

</html>
